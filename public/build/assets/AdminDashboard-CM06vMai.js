import{r as i,j as e,H as D,a as n}from"./app-C8lhSVMT.js";import{A as T}from"./AuthenticatedLayout-BQBJokpI.js";import{U as j}from"./users-BEapWFTP.js";import{F as z}from"./file-text-5M3K4KXe.js";import{c as L}from"./createLucideIcon-CskaXQlG.js";import{P as E}from"./plus-rlBv8JRI.js";import{S as P}from"./search-B5pCdbKa.js";import{S as _}from"./save-BW_-kEQC.js";import{X as I}from"./x-Cs26qH8L.js";import{P as M}from"./pen-eFDgpWqW.js";import{T as R}from"./trash-2-7HzIC937.js";import"./transition-DJXpX6vE.js";const $=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],F=L("chart-column",$);function Z({auth:h,users:o,submissions:c,stats:y}){const[x,N]=i.useState("dashboard"),[a,r]=i.useState(null),[u,m]=i.useState(!1),[p,b]=i.useState(""),[l,d]=i.useState({name:"",email:"",password:"",role:"user",status:"active"}),g=["admin","editor","moderator","user"],v=["active","inactive","suspended"],f=o?.filter(s=>s.name.toLowerCase().includes(p.toLowerCase())||s.email.toLowerCase().includes(p.toLowerCase()))||[],w=s=>{s.preventDefault(),n.post(route("admin.users.store"),l,{onSuccess:()=>{d({name:"",email:"",password:"",role:"user",status:"active"}),m(!1)},onError:t=>{console.error("Validation errors:",t)}})},C=()=>{n.put(route("admin.users.update",a.id),a,{onSuccess:()=>{r(null)},onError:s=>{console.error("Update errors:",s)}})},S=s=>{confirm("Apakah Anda yakin ingin menghapus user ini?")&&n.delete(route("admin.users.destroy",s))},U=(s,t)=>{n.put(route("admin.submissions.update-status",s),{status:t})},k=[{label:"Total Users",value:o?.length||0,icon:j,color:"bg-blue-500"},{label:"Total Submissions",value:c?.length||0,icon:z,color:"bg-green-500"},{label:"Pending Review",value:c?.filter(s=>s.status==="pending").length||0,icon:F,color:"bg-yellow-500"},{label:"Active Users",value:o?.filter(s=>s.status==="active").length||0,icon:j,color:"bg-purple-500"}],A=y||k;return e.jsxs(T,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Admin Dashboard"}),h.user.role==="admin"&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:"Administrator"})]}),children:[e.jsx(D,{title:"Admin Dashboard"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white rounded-t-lg shadow",children:e.jsx("nav",{className:"flex border-b",children:["dashboard","users","submissions"].map(s=>e.jsx("button",{onClick:()=>N(s),className:`py-4 px-6 font-medium text-sm capitalize ${x===s?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s},s))})}),x==="dashboard"&&e.jsxs("div",{className:"bg-white rounded-b-lg shadow p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:A.map((s,t)=>e.jsx("div",{className:"bg-white border rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:s.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:s.value})]}),e.jsx("div",{className:`${s.color} p-3 rounded-lg`,children:e.jsx(s.icon,{className:"w-6 h-6 text-white"})})]})},t))}),e.jsxs("div",{className:"border rounded-lg",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Aktivitas Terbaru"})}),e.jsx("div",{className:"divide-y",children:c?.slice(0,5).map(s=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.user_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.type," - ",s.content]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString("id-ID")}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${s.status==="approved"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status})]})]})},s.id))})]})]}),x==="users"&&e.jsxs("div",{className:"bg-white rounded-b-lg shadow",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manajemen User & Role"}),e.jsxs("button",{onClick:()=>m(!u),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center space-x-2",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:"Tambah User"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari user...",value:p,onChange:s=>b(s.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),u&&e.jsxs("form",{onSubmit:w,className:"p-6 bg-blue-50 border-b",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Tambah User Baru"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Nama",required:!0,value:l.name,onChange:s=>d({...l,name:s.target.value}),className:"px-4 py-2 border rounded-lg"}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:l.email,onChange:s=>d({...l,email:s.target.value}),className:"px-4 py-2 border rounded-lg"}),e.jsx("input",{type:"password",placeholder:"Password",required:!0,value:l.password,onChange:s=>d({...l,password:s.target.value}),className:"px-4 py-2 border rounded-lg"}),e.jsx("select",{value:l.role,onChange:s=>d({...l,role:s.target.value}),className:"px-4 py-2 border rounded-lg",children:g.map(s=>e.jsx("option",{value:s,className:"capitalize",children:s},s))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600",children:"Simpan"}),e.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100",children:"Batal"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y",children:f.map(s=>e.jsx("tr",{className:"hover:bg-gray-50",children:a?.id===s.id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"text",value:a.name,onChange:t=>r({...a,name:t.target.value}),className:"px-2 py-1 border rounded w-full"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"email",value:a.email,onChange:t=>r({...a,email:t.target.value}),className:"px-2 py-1 border rounded w-full"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("select",{value:a.role,onChange:t=>r({...a,role:t.target.value}),className:"px-2 py-1 border rounded w-full",children:g.map(t=>e.jsx("option",{value:t,className:"capitalize",children:t},t))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("select",{value:a.status,onChange:t=>r({...a,status:t.target.value}),className:"px-2 py-1 border rounded w-full",children:v.map(t=>e.jsx("option",{value:t,className:"capitalize",children:t},t))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:C,className:"text-green-600 hover:text-green-800",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>r(null),className:"text-gray-600 hover:text-gray-800",children:e.jsx(I,{className:"w-5 h-5"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 text-gray-500",children:s.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm capitalize",children:s.role})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm capitalize ${s.status==="active"?"bg-green-100 text-green-800":s.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:s.status||"active"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>r({...s}),className:"text-blue-600 hover:text-blue-800",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(s.id),className:"text-red-600 hover:text-red-800",disabled:s.id===h.user.id,children:e.jsx(R,{className:"w-5 h-5"})})]})})]})},s.id))})]})})]}),x==="submissions"&&e.jsxs("div",{className:"bg-white rounded-b-lg shadow",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Data Inputan"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipe"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Konten"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y",children:c?.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:["#",s.id]}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:s.user_name}),e.jsx("td",{className:"px-6 py-4 text-gray-500",children:s.type}),e.jsx("td",{className:"px-6 py-4 text-gray-500",children:s.content}),e.jsx("td",{className:"px-6 py-4 text-gray-500",children:new Date(s.created_at).toLocaleDateString("id-ID")}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{value:s.status,onChange:t=>U(s.id,t.target.value),className:`px-3 py-1 rounded-full text-sm border-0 font-medium capitalize ${s.status==="approved"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>n.visit(route("admin.submissions.show",s.id)),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Lihat Detail"})})]},s.id))})]})})]})]})})]})}export{Z as default};
