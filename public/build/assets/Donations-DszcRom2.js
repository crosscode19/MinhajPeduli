import{r as l,j as e,H as D,a as n,L as N}from"./app-C8lhSVMT.js";import{A as z}from"./AdminLayout-DayVYhfC.js";import{D as M}from"./download-C3i-z5bE.js";import{F}from"./funnel-BKi2r-mI.js";import{c as k}from"./createLucideIcon-CskaXQlG.js";import{S as I}from"./save-BW_-kEQC.js";import{X as w}from"./x-Cs26qH8L.js";import{P as E}from"./pen-eFDgpWqW.js";import{C as $}from"./check-KA7DhQhq.js";import{E as v}from"./eye-BdyCLs0_.js";import"./file-text-5M3K4KXe.js";import"./users-BEapWFTP.js";import"./menu-wL7uFBCp.js";const U=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],A=k("arrow-down-wide-narrow",U);const L=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h4",key:"1krc32"}]],P=k("arrow-up-wide-narrow",L);function Z({pendingDonations:m={},paidDonations:p={},filters:s={}}){const[r,g]=l.useState(s.tab||"pending"),[h,o]=l.useState(null),[d,c]=l.useState(!1),[S,x]=l.useState(null),[u,b]=l.useState(""),j=a=>{n.get(route("admin.donations"),{...s,sort:"nominal",direction:a,tab:r},{preserveState:!0,replace:!0}),c(!1)},C=()=>{const a=new URLSearchParams({start_date:s.start_date||"",end_date:s.end_date||"",tab:r}).toString();window.location.href=`/admin/donations/export?${a}`},y=(a,i)=>{confirm(`Yakin ingin mengubah status menjadi ${i.toUpperCase()}?`)&&(o(a),n.post(route("admin.donations.update-status",a),{status:i},{preserveScroll:!0,onSuccess:()=>o(null),onError:()=>o(null)}))},T=a=>{n.post(route("admin.donations.update-nominal",a),{nominal:u},{preserveScroll:!0,onSuccess:()=>x(null)})},f=(a,i)=>!a||!a.data||a.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:e.jsx("p",{className:"text-sm",children:"Tidak ada data donasi ditemukan."})})}):a.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition border-b text-gray-800",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-xs font-bold",children:t.invoice_no}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.phone})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-gray-700 truncate block max-w-[200px]",title:t.program?.title,children:t.program?.title||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-between min-w-[160px]",children:S===t.id?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",className:"border border-green-500 rounded px-2 py-1 text-sm w-32 text-gray-800 focus:ring-2 focus:ring-green-100 outline-none",value:u,onChange:_=>b(_.target.value),autoFocus:!0}),e.jsx("button",{onClick:()=>T(t.id),className:"p-1.5 bg-green-600 text-white rounded hover:bg-green-700 transition",children:e.jsx(I,{size:14})}),e.jsx("button",{onClick:()=>x(null),className:"p-1.5 bg-gray-400 text-white rounded hover:bg-gray-500 transition",children:e.jsx(w,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold text-green-600",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t.nominal)}),e.jsx("button",{onClick:()=>{x(t.id),b(t.nominal)},className:"p-1.5 bg-blue-50 text-blue-600 rounded hover:bg-blue-600 hover:text-white transition-all",title:"Koreksi Nominal",children:e.jsx(E,{size:12})})]})})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:t.date}),e.jsx("td",{className:"px-6 py-4 text-center",children:i==="pending"?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{disabled:h===t.id,onClick:()=>y(t.id,"paid"),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-600 hover:text-white transition shadow-sm",title:"Terima Donasi",children:e.jsx($,{size:16})}),e.jsx("button",{disabled:h===t.id,onClick:()=>y(t.id,"failed"),className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-600 hover:text-white transition shadow-sm",title:"Tolak Donasi",children:e.jsx(w,{size:16})}),e.jsx(N,{href:route("admin.donations.show",t.id),className:"p-2 text-gray-400 hover:text-blue-600 transition",children:e.jsx(v,{size:18})})]}):e.jsxs(N,{href:route("admin.donations.show",t.id),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg text-xs font-bold hover:bg-blue-600 hover:text-white transition",children:[e.jsx(v,{size:14})," Detail"]})})]},t.id));return e.jsxs(z,{children:[e.jsx(D,{title:"Kelola Donasi"}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Manajemen Donasi"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-white border border-green-200 text-green-700 rounded-lg text-sm font-semibold hover:bg-green-50 transition shadow-sm",children:[e.jsx(M,{size:16}),"Export CSV"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(!d),className:`flex items-center gap-2 border px-4 py-2 rounded-lg text-sm font-medium transition shadow-sm ${d?"bg-gray-100":"bg-white"}`,children:[e.jsx(F,{size:16}),"Filter & Urutkan"]}),d&&e.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white border rounded-xl shadow-xl z-50 p-5",children:[e.jsx("div",{className:"text-[10px] font-black text-gray-400 mb-3 uppercase tracking-[0.1em]",children:"Urutkan Nominal"}),e.jsxs("div",{className:"flex flex-col gap-1 mb-5",children:[e.jsxs("button",{onClick:()=>j("desc"),className:`w-full text-left px-3 py-2 text-sm rounded-lg flex items-center gap-2 ${s.direction==="desc"?"bg-green-50 text-green-700 font-bold":"hover:bg-gray-50"}`,children:[e.jsx(A,{size:16})," Terbesar ke Terkecil"]}),e.jsxs("button",{onClick:()=>j("asc"),className:`w-full text-left px-3 py-2 text-sm rounded-lg flex items-center gap-2 ${s.direction==="asc"?"bg-green-50 text-green-700 font-bold":"hover:bg-gray-50"}`,children:[e.jsx(P,{size:16})," Terkecil ke Terbesar"]})]}),e.jsx("hr",{className:"my-4 border-gray-100"}),e.jsx("div",{className:"text-[10px] font-black text-gray-400 mb-3 uppercase tracking-[0.1em]",children:"Rentang Tanggal"}),e.jsxs("div",{className:"space-y-3 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 uppercase font-bold ml-1",children:"Dari Tanggal"}),e.jsx("input",{type:"date",value:s.start_date||"",onChange:a=>n.get(route("admin.donations"),{...s,start_date:a.target.value,tab:r},{preserveState:!0}),className:"w-full border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-green-500 outline-none mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 uppercase font-bold ml-1",children:"Sampai Tanggal"}),e.jsx("input",{type:"date",value:s.end_date||"",onChange:a=>n.get(route("admin.donations"),{...s,end_date:a.target.value,tab:r},{preserveState:!0}),className:"w-full border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-green-500 outline-none mt-1"})]})]}),e.jsx("button",{onClick:()=>{n.get(route("admin.donations"),{tab:r},{replace:!0}),c(!1)},className:"w-full text-center py-2 text-xs text-red-500 hover:bg-red-50 rounded-lg font-bold border border-transparent hover:border-red-100 transition",children:"Reset Semua Filter"})]})]})]})]}),e.jsxs("div",{className:"mb-6 flex p-1 bg-gray-100 rounded-xl w-fit",children:[e.jsxs("button",{onClick:()=>{g("pending"),n.get(route("admin.donations"),{...s,tab:"pending"},{preserveState:!0})},className:`px-6 py-2.5 rounded-lg text-sm font-bold transition-all ${r==="pending"?"bg-white shadow text-green-600":"text-gray-500 hover:text-gray-700"}`,children:["Donasi Masuk ",e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-[10px]",children:m?.total??0})]}),e.jsxs("button",{onClick:()=>{g("paid"),n.get(route("admin.donations"),{...s,tab:"paid"},{preserveState:!0})},className:`px-6 py-2.5 rounded-lg text-sm font-bold transition-all ${r==="paid"?"bg-white shadow text-green-600":"text-gray-500 hover:text-gray-700"}`,children:["Donasi Terbayar ",e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-200 text-gray-700 rounded-full text-[10px]",children:p?.total??0})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-50/50 text-gray-400 font-black uppercase text-[10px] tracking-widest border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Invoice"}),e.jsx("th",{className:"px-6 py-4",children:"Donatur"}),e.jsx("th",{className:"px-6 py-4",children:"Program"}),e.jsx("th",{className:"px-6 py-4",children:"Nominal"}),e.jsx("th",{className:"px-6 py-4",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:r==="pending"?f(m,"pending"):f(p,"paid")})]})})})]})}export{Z as default};
