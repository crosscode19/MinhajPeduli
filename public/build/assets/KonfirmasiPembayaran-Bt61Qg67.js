import{r as a,j as e,H as _,L as A,a as j}from"./app-C8lhSVMT.js";import{P as D}from"./ProgressBar-O2F_JV1i.js";import{T as F}from"./trash-2-7HzIC937.js";import{C as K}from"./check-KA7DhQhq.js";import"./createLucideIcon-CskaXQlG.js";function V({auth:O,id:T,data:s,donation_id:m}){const d={name:s.name||"Hamba Allah",email:s.email||"",phone:s.phone||"",nominal:Number(s.nominal)||0},N=(Number(s.unique_code_number)||0).toString().padStart(3,"0"),v=s.invoice_no||"INV-GENERATING",[n,w]=a.useState(d.name),[c,k]=a.useState("BCA"),[l,S]=a.useState(new Date().toISOString().split("T")[0]),[b,P]=a.useState(""),[g,x]=a.useState(null),[C,p]=a.useState(""),[t,u]=a.useState(null),[I,B]=a.useState(!1),[i,f]=a.useState(!1),[h,y]=a.useState(()=>{if(typeof window<"u"){const r=window.sessionStorage.getItem("konfirmasiStep");if(r)return parseInt(r,10)}return 1}),R=r=>new Intl.NumberFormat("id-ID").format(Math.floor(r)),M=r=>{const o=r.target.files[0];o&&(t&&URL.revokeObjectURL(t),x(o),p(o.name),u(URL.createObjectURL(o)))},L=()=>{x(null),p(""),t&&(URL.revokeObjectURL(t),u(null)),document.getElementById("payment-proof-upload").value=null};a.useEffect(()=>{typeof window<"u"&&window.sessionStorage.setItem("konfirmasiStep",h)},[h]);const U=r=>{if(r&&r.preventDefault(),!n||!l||!g){alert("Mohon lengkapi semua data dan lampirkan bukti transfer.");return}f(!0),y(2),j.post(route("donasi.confirm"),{donation_id:s.id||m,proof_image:g,bank_owner:n,bank_name:c,payment_date:l,notes:b},{forceFormData:!0,onSuccess:()=>{B(!0),y(3)},onError:o=>{alert("Terjadi kesalahan saat mengirim konfirmasi."),console.log(o)},onFinish:()=>f(!1)})};return console.log("data.id:",s.id),console.log("donation_id:",m),e.jsxs(e.Fragment,{children:[e.jsx(_,{title:"Konfirmasi Pembayaran"}),e.jsxs("div",{className:"min-h-screen bg-white text-slate-800 font-sans",children:[e.jsxs("nav",{className:"flex justify-between items-center px-6 py-4 bg-green-100 shadow-sm sticky top-0 z-50",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-700 italic",children:["Minhaj",e.jsx("span",{className:"text-green-900",children:"Peduli"})]}),e.jsx(A,{href:"/",className:"text-sm font-semibold text-gray-600",children:"Kembali"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10",children:[e.jsx(D,{step:3}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-700 uppercase tracking-wide",children:["Mohon Lengkapi Form",e.jsx("br",{}),"Konfirmasi Pembayaran Manual"]}),e.jsx("hr",{className:"mt-4 border-gray-300 w-full"})]}),e.jsxs("div",{className:"border border-gray-400 text-sm md:text-base",children:[e.jsx("div",{className:"border-b border-gray-400 bg-white p-4 font-bold text-gray-700 uppercase",children:"Formulir Konfirmasi Pembayaran Manual"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 border-b border-gray-400",children:[e.jsx("div",{className:"p-4 font-bold text-gray-700 border-b md:border-b-0 md:border-r border-gray-400 bg-gray-50 md:bg-white flex items-center",children:"No. Invoice"}),e.jsx("div",{className:"p-4 md:col-span-2 text-gray-800 flex items-center",children:v})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 border-b border-gray-400",children:[e.jsx("div",{className:"p-4 font-bold text-gray-700 border-b md:border-b-0 md:border-r border-gray-400 bg-gray-50 md:bg-white flex items-center",children:"Nama Lengkap"}),e.jsx("div",{className:"p-4 md:col-span-2 text-gray-800 flex items-center",children:d.name})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 border-b border-gray-400",children:[e.jsx("div",{className:"p-4 font-bold text-gray-700 border-b md:border-b-0 md:border-r border-gray-400 bg-gray-50 md:bg-white flex items-center",children:"Bank Anda *"}),e.jsxs("div",{className:"p-4 md:col-span-2 text-gray-800 flex flex-col md:flex-row gap-3",children:[e.jsx("input",{type:"text",value:n,onChange:r=>w(r.target.value),className:"border border-gray-400 px-3 py-2 w-full md:w-1/2 focus:outline-none",placeholder:"Nama pemilik rekening"}),e.jsxs("select",{value:c,onChange:r=>k(r.target.value),className:"border border-gray-400 px-3 py-2 w-full md:w-1/3 bg-white",children:[e.jsx("option",{value:"BCA",children:"BCA"}),e.jsx("option",{value:"BRI",children:"BRI"}),e.jsx("option",{value:"MANDIRI",children:"MANDIRI"}),e.jsx("option",{value:"BNI",children:"BNI"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 border-b border-gray-400",children:[e.jsx("div",{className:"p-4 font-bold text-gray-700 border-b md:border-b-0 md:border-r border-gray-400 bg-gray-50 md:bg-white flex items-center",children:"Jumlah Donasi"}),e.jsxs("div",{className:"p-4 md:col-span-2 text-gray-800 font-bold flex items-center",children:["Rp ",R(d.nominal)]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 border-b border-gray-400",children:[e.jsx("div",{className:"p-4 font-bold text-gray-700 border-b md:border-b-0 md:border-r border-gray-400 bg-gray-50 md:bg-white flex items-center",children:"Kode Unik"}),e.jsx("div",{className:"p-4 md:col-span-2 text-red-600 font-bold flex items-center",children:N})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 border-b border-gray-400",children:[e.jsx("div",{className:"p-4 font-bold text-gray-700 border-b md:border-b-0 md:border-r border-gray-400 bg-gray-50 md:bg-white flex items-center",children:"Tanggal Bayar *"}),e.jsx("div",{className:"p-4 md:col-span-2",children:e.jsx("input",{type:"date",value:l,onChange:r=>S(r.target.value),className:"border border-gray-400 px-3 py-2 w-full md:w-1/2"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 border-b border-gray-400",children:[e.jsx("div",{className:"p-4 font-bold text-gray-700 border-b md:border-b-0 md:border-r border-gray-400 bg-gray-50 md:bg-white flex items-center",children:"Bukti Pembayaran *"}),e.jsxs("div",{className:"p-4 md:col-span-2 text-gray-800",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-start md:items-center mb-4",children:[e.jsx("input",{type:"text",value:C||"Bukti belum dipilih",readOnly:!0,className:"border border-gray-400 px-3 py-2 w-full md:w-1/2 bg-white text-gray-400 italic"}),e.jsx("input",{type:"file",id:"payment-proof-upload",className:"hidden",onChange:M,accept:"image/*"}),e.jsx("label",{htmlFor:"payment-proof-upload",className:"cursor-pointer bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-6 border border-gray-400 text-center",children:"Pilih File"})]}),t&&e.jsxs("div",{className:"mt-4 p-2 border border-dashed border-gray-400 relative max-w-xs bg-gray-50",children:[e.jsx("img",{src:t,alt:"Preview",className:"w-full h-auto object-cover rounded"}),e.jsx("button",{onClick:L,className:"absolute top-0 right-0 m-1 p-1 bg-red-500 text-white rounded-full",children:e.jsx(F,{size:14})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3",children:[e.jsx("div",{className:"p-4 font-bold text-gray-700 border-b md:border-b-0 md:border-r border-gray-400 bg-gray-50 md:bg-white",children:"Catatan"}),e.jsx("div",{className:"p-4 md:col-span-2 text-gray-800",children:e.jsx("textarea",{placeholder:"Tambahkan catatan (opsional)",value:b,onChange:r=>P(r.target.value),rows:"3",className:"w-full border border-gray-300 p-2 focus:outline-none resize-none"})})]})]}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("button",{onClick:U,disabled:i,className:`${i?"bg-gray-400":"bg-green-100 hover:bg-green-200"} text-green-900 font-bold py-3 px-20 rounded-full shadow-md border border-green-300 transition transform active:scale-95`,children:i?"Mengirim...":"Konfirmasi Sekarang"})})]})]}),I&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-sm w-full text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(K,{size:32,strokeWidth:3})}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Terima Kasih!"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Konfirmasi pembayaran Anda telah kami terima dan akan segera diverifikasi."}),e.jsx("button",{onClick:()=>j.visit("/"),className:"w-full bg-sky-500 text-white py-2 rounded-lg font-bold",children:"Oke"})]})})]})}export{V as default};
